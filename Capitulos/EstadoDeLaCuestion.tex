\chapter{Estado de la Cuestión}
\label{cap:estadoDeLaCuestion}


\section{Conceptos sobre el ámbito}

Toda la información almacenada en la web está relacionada de alguna forma siguiendo una estructura. Esto significa que los documentos pueden ser enlazados entre sí con ciertos objetivos concretos, como crear motores de búsqueda o recomendadores.

El sistema estructural más importante que nos interesa para este proyecto es el Esquema RDF (Resource Description Framework), que es un modelo de datos basado en declaraciones sobre recursos web mediante expresiones sujeto-predicado-objeto. Dichas expresiones se llaman “triples”, donde el sujeto representa al recurso, el objeto representa el valor del recurso y el predicado supone los rasgos o aspectos del recurso que relacionan sujeto y objeto.\cite{sakr2018}

Estos tres argumentos se representan mediante un Identificador de Recursos: una URI~(Uniform Resource Identifier).\cite{sakr2018,berners1998}

A su vez, esta URI puede ser una URL (Uniform Resource Locator), que es un identificador de recursos cuyos recursos referidos pueden variar en el tiempo, o una URN (Uniform Resource Name), que es un identificador de recursos independiente de la localización de estos recursos.\cite{berners1994,saint2017,sakr2018}

Esencialmente, estas tres tuplas están relacionadas entre ellas de una forma que podemos representar mediante un grafo. Cada una de estas tuplas puede estar relacionada también con otras, creando así un grafo más grande y completo que enlaza una gran cantidad de información.

Una vez comprendido esto, podemos hablar sobre los distintos formatos de RDF:
\begin{itemize}
\item xml
\item json
\item turtle
\item triples
\end{itemize}

El lenguaje principal que vamos a utilizar para consultar los datos enlazados de la web es SPARQL. Este es un lenguaje especializado para buscar y consultar datos RDF. Tiene una sintaxis sencilla e incluye uso de prefijos para simplificar las URL.

Como hemos comentado, si empleamos este lenguaje seremos capaces de relacionar un sujeto y un objeto mediante un predicado de forma que obtendremos un grafo similar al siguiente:\\

(GRAPH)\\

Podríamos decir que estamos estableciendo una relación entre dos objetos unidos mediante una propiedad. Esta propiedad es una ``explicación'' que nos sirve para relacionar objetos. En nuestro proyecto, estos objetos son canciones.


\section{SPARQL y WikiData}

Gracias a WikiData, tenemos una gran cantidad de información relevante acerca de toda nuestra cultura reunida en un mismo sitio. La usaremos para consultar e investigar la información relacionada con nuestro dataset o conjunto de datos, esencialmente datos acerca de artistas y sus temas musicales.

Necesitamos un método para navegar por esta información, por lo que usaremos SPARQL. WikiData está estructurada de tal manera que resulta sencillo acceder a su información utilizando el lenguaje de consultas SPARQL. Cada objeto tiene ciertas propiedades a las que podemos acceder seleccionando el identificador correcto de la propiedad.

Un ejemplo de una consulta sencilla podría ser:\\

-Obtén todos los Artistas cuyo género musical sea Rock:\\

\begin{lstlisting}[language=SPARQL]
SELECT ?singer ?singerLabel ?genre ?genreLabel
WHERE
{
  ?singer wdt:P31 wd:Q215380;
      	  wdt:P136 wd:Q7749;
  SERVICE wikibase:label { bd:serviceParam wikibase:language "en" . }
}
\end{lstlisting}

En esta consulta estamos accediendo a todos los objetos que contengan las propiedades(wdt) P31(Tipo Instancia) y P136(Género) con el valor(wd) que nosotros estamos seleccionando, Q215380 y Q7749, forzando así a que las dos propiedades sean Grupo Musical y Rock and Roll respectivamente.
SPARQL es un lenguaje muy potente que puede abarcar gran cantidad de datos en función de la web (se pueden crear consultas mucho más complejas para obtener datos más específicos). En nuestro caso usaremos la API de Wikidata mediante la librería SPARQLWrapper de Python.

Librerías:

SPARQLWRAPPER
Para usar eficientemente esta librería, se crea una variable SPARQLWrapper que nos permitirá ejecutar consultas SPARQL mediante formatos string.
El resultado es un formato JSON el cual se trata para eliminar información extra de la query.
PANDAS:
Tratado de los datasets que creamos a partir de los ficheros JSON y para el estudio del dataset original.